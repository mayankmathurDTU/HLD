+------------------------------------------------------------------------------------------------------------------------------+
|                                                ðŸ”‘ KEY TYPES SUMMARY TABLE                                                    |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| KEY TYPE           | WHERE ITâ€™S USED           | LAYMAN EXPLANATION                 | LIFETIME (AND WHY)                         |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| Idempotency Key    | Payment APIs, booking     | Prevents duplicate actions â€” like  | SHORT (few minsâ€“hours)                     |
|                    | systems (Stripe, Razorpay)| making sure a payment isnâ€™t made   | â†’ Only needed until server confirms        |
|                    |                           | twice if you click â€œPayâ€ twice.    | one request successfully.                  |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| API Key            | External APIs (Google     | Identifies *which app* or *client* | LONG (days to permanent)                   |
|                    | Maps, OpenAI, Twilio)     | is calling the API â€” like your app | â†’ Rarely changes; tied to your developer   |
|                    |                           | having a name badge.               | account or project.                        |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| Access Token       | User login APIs, OAuth2,  | Proves the user is *logged in*.    | SHORT (minutes to hours)                   |
|                    | mobile apps, websites     | Like a temporary ID card you show  | â†’ Short so if itâ€™s stolen, hacker canâ€™t    |
|                    | (Facebook, Gmail)         | to enter restricted areas.         | misuse it for long.                        |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| Refresh Token      | OAuth2, login systems     | Used to get a new access token     | LONG (days to weeks)                       |
|                    | (Google, Microsoft, etc.) | when old one expires â€” like a      | â†’ Stays valid longer to avoid forcing      |
|                    |                           | â€œrenewal passâ€ for your ID.        | frequent logins.                           |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| Primary Key        | Databases (MySQL,         | Unique ID for each row â€” like a    | PERMANENT                                  |
|                    | PostgreSQL, etc.)         | roll number in a school record.    | â†’ It never changes for that record.        |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| Foreign Key        | Databases (relational     | Connects one table to another â€”    | PERMANENT                                  |
|                    | models)                   | like saying â€œOrder #5 belongs to   | â†’ Database design relationship never        |
|                    |                           | User #2â€.                         | changes unless schema changes.             |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| Encryption Key     | HTTPS, JWTs, SSL, VPN,    | Used to lock/unlock sensitive data | LONG (depends on system policy)            |
|                    | databases, storage        | â€” like a digital key for a vault.  | â†’ Must remain same until key rotation or   |
|                    |                           |                                   | certificate expiry (weeksâ€“months).         |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+
| Session Key        | Web logins, mobile apps   | Temporary secret shared between    | SHORT (minutes to hours)                   |
|                    | (cookies, tokens)         | you and website to stay logged in. | â†’ Ends when you log out or session times   |
|                    |                           | Like a â€œvisitor passâ€ that expires.| out for safety.                            |
+--------------------+---------------------------+-----------------------------------+--------------------------------------------+






+-----------------------------------------------------------------------------------------------------+
|                              ðŸ”  REAL-WORLD FLOW OF KEYS (LOGIN + PAYMENT)                          |
+-----------------------------------------------------------------------------------------------------+

USER (you)
  |
  |---> Logs into App -------------------------------------------------------------------------------+
  |                                                                                                  |
  |   [Session Key]  : Keeps you logged in temporarily (browser cookie or token)                     |
  |   [Access Token] : Sent with each request to prove who you are                                   |
  |   [Refresh Token]: Used to get new Access Token when it expires                                  |
  |                                                                                                  |
  +--------------------------------------------------------------------------------------------------+
                                      |
                                      v
+-----------------------------------------------------------------------------------------------------+
|             APP / FRONTEND (mobile app, website, etc.)                                             |
+-----------------------------------------------------------------------------------------------------+
|   - Stores API Key to identify itself to backend                                                   |
|   - Generates Idempotency Key for each payment or booking request                                  |
|   - Sends user Access Token + Idempotency Key + API Key to Backend                                 |
|                                                                                                   |
|   Example headers:                                                                                 |
|   Authorization: Bearer <access_token>                                                             |
|   Idempotency-Key: order_12345                                                                     |
|   Api-Key: app_ABCxyz                                                                              |
+-----------------------------------------------------------------------------------------------------+
                                      |
                                      v
+-----------------------------------------------------------------------------------------------------+
|                   BACKEND SERVER / API GATEWAY (e.g. Stripe, Swiggy)                              |
+-----------------------------------------------------------------------------------------------------+
|   Uses Encryption Keys to:                                                                         |
|     - Securely communicate (HTTPS / TLS)                                                           |
|     - Encrypt sensitive data (cards, passwords, etc.)                                              |
|                                                                                                   |
|   Checks:                                                                                          |
|     âœ… API Key â†’ Is this a valid app?                                                              |
|     âœ… Access Token â†’ Is the user logged in?                                                       |
|     âœ… Idempotency Key â†’ Has this payment been processed before?                                   |
|                                                                                                   |
|   If new â†’ process payment, store in database with:                                                |
|     â€¢ Primary Key   â†’ unique transaction id                                                        |
|     â€¢ Foreign Key   â†’ link to user id                                                              |
+-----------------------------------------------------------------------------------------------------+
                                      |
                                      v
+-----------------------------------------------------------------------------------------------------+
|                          DATABASE (MySQL / PostgreSQL)                                             |
+-----------------------------------------------------------------------------------------------------+
|   â€¢ Primary Key  â†’ Each transaction or user record unique                                           |
|   â€¢ Foreign Key  â†’ Connects user and their payments                                                 |
|   â€¢ Data encrypted using Encryption Keys                                                            |
+-----------------------------------------------------------------------------------------------------+
                                      |
                                      v
+-----------------------------------------------------------------------------------------------------+
|                        RESPONSE SENT BACK TO USER                                                  |
+-----------------------------------------------------------------------------------------------------+
|   - Returns payment status                                                                        |
|   - Same Idempotency Key ensures retries donâ€™t duplicate                                           |
|   - Session Key + Access Token maintain userâ€™s logged-in state                                    |
+-----------------------------------------------------------------------------------------------------+

ðŸ§   LIFETIME SUMMARY:
---------------------
Short-lived Keys   â†’ Session Key, Access Token, Idempotency Key (expire soon for safety)
Long-lived Keys    â†’ API Key, Refresh Token, Encryption Key (needed for stability)
Permanent Keys     â†’ Primary Key, Foreign Key (database-level identifiers)

